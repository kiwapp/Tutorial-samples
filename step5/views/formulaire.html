<div class="page-formulaire">
    <button class="open-page back-btn" type="button" data-page="home">Back</button>
    <form id="formbeforegame" onsubmit="return false;">
        <div class="field">
            <label for="name">Last name</label>
            <input name="name" id="name" type="text" placeholder="" />
        </div>

    <div class="field">
        <label for="surname">First name</label>
        <input name="surname" type="text" id="surname" placeholder="" />
    </div>

    <div class="field">
        <label for="email">e-mail</label>
        <input name="email" id="email" type="email" placeholder="" />
    </div>

    <div class="field">
        <label for="phone">phone</label>
        <input name="phone" id="phone" type="tel" placeholder="" />
    </div>

    <div class="field field-optin">
        <input name="optin" type="checkbox" id="optin" value="" />
        <label for="optin">Would you like to receive special deals and offers from <span class="name-shop">Chez Barney's?</span></label>
    </div>

    <button type="button" id="playtoform" class="btn-formulaire">Play</button>

    </form>
</div>
<script>

    // Detect the click on the button play
    // It will parse the form and record it
    $('#playtoform').click(function() {

        var inputs        = $('#formbeforegame').serializeArray(),
            checkboxValue = $('#optin').is(':checked'),
            data          = {};

        // Build each input's value into a JSON {key:value}
        inputs.forEach(function(input,i) {
            data[input.name] = input.value;
        });

        data['optin'] = checkboxValue;


        var appConfig = Kiwapp.get('shopParameters');

        // Check if we have to send our data to Parse
        if(~~appConfig.activeParse) {
            new ParseConnector(appConfig.APP_KEY, appConfig.APP_ID)
                .app(appConfig.APP_NAME)
                .send(data);
        }

        // Check if you have set a custom url in order to send to your own webservice
        if(appConfig.customUrl.length) {
            $.post(appConfig.customUrl, data)
                .fail(function() {
                    Kiwapp.session().store(data).send({
                        url    : appConfig.customUrl,
                        method : "POST"
                    });
                })
        }

        // Then we can open the page game
        openPage('game');
    });


</script>